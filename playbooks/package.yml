---
- name: Common Host Configuration
  hosts: all
  vars_files:
    - vars/cloud_defaults.yml
    - ['../cloud_config.yml']
  roles:
    - common

- name: Install Repositories
  hosts: all
  vars_files:
    - vars/cloud_defaults.yml
    - ['../cloud_config.yml']
  tasks:
    - name: Eucalyptus Repository
      template: src=templates/eucalyptus.repo.j2 dest=/etc/yum.repos.d/eucalyptus.repo
      tags:
        - repository
        - package

    - name: Enterprise Repository
      template: src=templates/eucalyptus-enterprise.repo.j2 dest=/etc/yum.repos.d/eucalyptus-enterprise.repo
      when: install_enterprise == true
      tags:
        - repository
        - package

- include: package/euca2ools.yml
- include: package/console.yml
- include: package/clc.yml
- include: package/cc.yml
- include: package/sc.yml
- include: package/walrus.yml
- include: package/nc.yml

